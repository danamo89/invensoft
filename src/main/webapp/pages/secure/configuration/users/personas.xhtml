<ui:composition template="/WEB-INF/facelets/templates/template.xhtml"
                xmlns="http://www.w3.org/1999/xhtml"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:p="http://primefaces.org/ui"
                xmlns:pe="http://primefaces.org/ui/extensions"
                xmlns:c="http://xmlns.jcp.org/jsp/jstl/core"
                xmlns:custom="http://java.sun.com/jsf/composite/components">

    <ui:define name="content">
        <h:form id="personasForm" enctype="multipart/form-data">
            <h:panelGroup id="generalPanelGroup" rendered="#{!personasController.showPersonasTable}">
                <p:tabView id="generalTabView" cache="false" >
                    <p:tab title="Personal">
                        <p:panelGrid style="width: 100%">
                            <f:facet name="header">
                                <p:row>
                                    <p:column style="text-align: center">
                                        <p:outputLabel value="Información del Personal"/>
                                    </p:column>
                                </p:row>
                            </f:facet>
                        </p:panelGrid>
                        <br/>
                        <p:panelGrid style="width: 100%; height: 100%">
                            <p:row>
                                <p:column style="width: 15%">
                                    <p:panel id="thumbimage-container" class="thumbimage-container">
                                        <p:graphicImage class="thumbimage" id="refreshMe" value="#{personasController.rutaFoto}" 
                                                        width="100" height="100" cache="false" styleClass="thumbimage">
                                            <f:param name="image_id" value="#{personasController.persona.legajo}"/>
                                        </p:graphicImage>
                                    </p:panel>
                                    <p:fileUpload auto="true" disabled="#{usuarioController.readOnly}"
                                                  update="personasForm:generalTabView:refreshMe" 
                                                  fileUploadListener="#{personasController.handleFileUpload}"
                                                  sizeLimit="10000000"
                                                  allowTypes="/(\.|\/)(gif|png|jpe?g)$/"
                                                  mode="advanced"/>
                                </p:column>
                                <p:column>
                                    <p:panelGrid style="width: 100%">
                                        <p:row>
                                            <p:column>
                                                <p:outputLabel value="Legajo" />
                                            </p:column>
                                            <p:column>
                                                <p:inputText id="legajo" label="Legajo" required="true" value="#{personasController.persona.legajo}" 
                                                             readonly="#{usuarioController.readOnly}" disabled="#{usuarioController.readOnly}">
                                                    <p:ajax event="blur" listener="#{personasController.onLegajoChange()}" update="personasForm:generalTabView:numeroIdentificacion"></p:ajax>
                                                </p:inputText>
                                            </p:column>
                                            <p:column>
                                                <p:outputLabel value="Lugar de Trabajo" />
                                            </p:column>
                                            <p:column style="width: 60%">
                                                <p:inputText label="Lugar de Trabajo" required="true" value="#{personasController.persona.lugarDeTrabajo}" 
                                                             readonly="#{usuarioController.readOnly}" disabled="#{usuarioController.readOnly}"/>
                                            </p:column>
                                        </p:row>
                                    </p:panelGrid>
                                    <br/>
                                    <p:panelGrid style="width: 100%">
                                        <f:facet name="header">
                                            <p:row>
                                                <p:column style="text-align: center">
                                                    <p:outputLabel value="Datos Personales"/>
                                                </p:column>
                                            </p:row>
                                        </f:facet>
                                    </p:panelGrid>
                                    <br/>
                                    <p:panelGrid style="width: 100%">
                                        <p:row>
                                            <p:column style="width: 10%">
                                                <p:outputLabel value="Apellidos"/>
                                            </p:column>
                                            <p:column colspan="2">
                                                <p:inputText label="Apellidos" required="true" value="#{personasController.persona.apellidos}"
                                                             readonly="#{usuarioController.readOnly}" disabled="#{usuarioController.readOnly}"/>
                                            </p:column>
                                            <p:column style="width: 12%">
                                                <p:outputLabel value="Nombres"/>
                                            </p:column>
                                            <p:column colspan="2">
                                                <p:inputText label="Nombres" required="true" value="#{personasController.persona.nombres}" 
                                                             readonly="#{usuarioController.readOnly}" disabled="#{usuarioController.readOnly}"/>
                                            </p:column>
                                        </p:row>
                                        <p:row>
                                            <p:column>
                                                <p:outputLabel value="Tipo de Identificación"/>
                                            </p:column>
                                            <p:column style="width: 15%">
                                                <p:selectOneMenu  value="#{personasController.persona.tipoIdentificacion.idTipoIdentificacion}" disabled="#{usuarioController.readOnly}">
                                                    <f:selectItems var="tipoIdentificacion" value="#{personasController.tiposIdentificacionList}" 
                                                                   itemLabel="#{tipoIdentificacion.descripcion}" itemValue="#{tipoIdentificacion.idTipoIdentificacion}"/>
                                                </p:selectOneMenu >
                                            </p:column>
                                            <p:column style="width: 12%">
                                                <p:outputLabel value="Número de Identificación"/>
                                            </p:column>
                                            <p:column>
                                                <p:inputText id="numeroIdentificacion" value="#{personasController.persona.numeroIdentificacion}"
                                                             readonly="#{usuarioController.readOnly}" disabled="#{usuarioController.readOnly}">
                                                </p:inputText>
                                            </p:column>
                                            <p:column>
                                                <p:outputLabel value="País de Origen"/>
                                            </p:column>
                                            <p:column>
                                                <p:selectOneMenu  value="#{personasController.persona.paisOrigen.idPais}" style="width: 95%" 
                                                                  disabled="#{usuarioController.readOnly}">
                                                    <f:selectItems var="pais" value="#{personasController.paisesList}" 
                                                                   itemLabel="#{pais.nombre}" itemValue="#{pais.idPais}"/>
                                                </p:selectOneMenu >
                                            </p:column>
                                        </p:row>
                                        <p:row>
                                            <p:column>
                                                <p:outputLabel value="Lugar de Nacimiento"/>
                                            </p:column>
                                            <p:column>
                                                <p:inputText value="#{personasController.persona.lugarNacimiento}" 
                                                             readonly="#{usuarioController.readOnly}" disabled="#{usuarioController.readOnly}"/>
                                            </p:column>
                                            <p:column>
                                                <p:outputLabel value="Fecha de Nacimiento"/>
                                            </p:column>
                                            <p:column>
                                                <p:calendar navigator="true" pattern="dd/MM/yyyy" readonly="#{usuarioController.readOnly}" disabled="#{usuarioController.readOnly}"
                                                            value="#{personasController.persona.fechaNacimiento}"/>
                                            </p:column>
                                            <p:column><p:outputLabel value="Estado Civíl"/></p:column>
                                            <p:column>
                                                <p:selectOneMenu  value="#{personasController.persona.estadoCivil.idEstadoCivil}" style="width: 95%" 
                                                                  disabled="#{usuarioController.readOnly}">
                                                    <f:selectItems var="estadoCivil" value="#{personasController.estadosCivilesList}" 
                                                                   itemLabel="#{estadoCivil.descripcion}" itemValue="#{estadoCivil.idEstadoCivil}"/>
                                                </p:selectOneMenu >
                                            </p:column>
                                        </p:row>
                                    </p:panelGrid>
                                </p:column>
                            </p:row>
                            <p:row>
                                <p:column colspan="2">
                                    <p:panelGrid style="width: 100%">
                                        <f:facet name="header">
                                            <p:row>
                                                <p:column style="text-align: center">
                                                    <p:outputLabel value="Domicilio"/>
                                                </p:column>
                                            </p:row>
                                        </f:facet>
                                    </p:panelGrid>
                                    <br/>
                                    <p:panelGrid style="width: 100%">
                                        <p:row>
                                            <p:column>
                                                <p:outputLabel value="Domicilio"/>
                                            </p:column>
                                            <p:column colspan="5">
                                                <p:inputText value="#{personasController.persona.domicilio}"
                                                             readonly="#{usuarioController.readOnly}" disabled="#{usuarioController.readOnly}"/>
                                            </p:column>
                                        </p:row>
                                        <p:row>
                                            <p:column>
                                                <p:outputLabel value="Número"/>
                                            </p:column>
                                            <p:column style="width: 26%">
                                                <p:inputText value="#{personasController.persona.numeroDomicilio}"
                                                             readonly="#{usuarioController.readOnly}" disabled="#{usuarioController.readOnly}"/>
                                            </p:column>
                                            <p:column>
                                                <p:outputLabel value="Piso"/>
                                            </p:column>
                                            <p:column style="width: 26%">
                                                <p:inputText value="#{personasController.persona.piso}"
                                                             readonly="#{usuarioController.readOnly}" disabled="#{usuarioController.readOnly}"/>
                                            </p:column>
                                            <p:column>
                                                <p:outputLabel value="Depto"/>
                                            </p:column>
                                            <p:column style="width: 26%">
                                                <p:inputText value="#{personasController.persona.departamento}"
                                                             readonly="#{usuarioController.readOnly}" disabled="#{usuarioController.readOnly}"/>
                                            </p:column>
                                        </p:row>
                                        <p:row>
                                            <p:column>
                                                <p:outputLabel value="Código Postal"/>
                                            </p:column>
                                            <p:column style="width: 26%">
                                                <p:inputText value="#{personasController.persona.codigoPostal}"
                                                             readonly="#{usuarioController.readOnly}" disabled="#{usuarioController.readOnly}"/>
                                            </p:column>
                                            <p:column>
                                                <p:outputLabel value="Provincia"/>
                                            </p:column>
                                            <p:column style="width: 26%">
                                                <p:selectOneMenu id="provincias" value="#{personasController.idProvinciaSelected}" style="width: 95%"
                                                                 disabled="#{usuarioController.readOnly}">
                                                    <p:ajax listener="#{personasController.onProvinciaChange()}" update="localidades" />
                                                    <f:selectItems value="#{personasController.provinciasList}" var="provincia" itemLabel="#{provincia.nombre}" itemValue="#{provincia.idProvincia}"/>
                                                </p:selectOneMenu>
                                            </p:column>
                                            <p:column>
                                                <p:outputLabel value="Localidad"/>
                                            </p:column>
                                            <p:column style="width: 26%">
                                                <p:selectOneMenu id="localidades" value="#{personasController.persona.localidad.idLocalidad}" style="width: 95%"
                                                                 disabled="#{usuarioController.readOnly}">
                                                    <f:selectItems value="#{personasController.localidadesList}" var="localidad" itemLabel="#{localidad.nombre}" itemValue="#{localidad.idLocalidad}"/>
                                                </p:selectOneMenu>
                                            </p:column>
                                        </p:row>
                                    </p:panelGrid>
                                    <br/>
                                    <p:panelGrid style="width: 100%">
                                        <f:facet name="header">
                                            <p:row>
                                                <p:column style="text-align: center">
                                                    <p:outputLabel value="Datos de Contacto"/>
                                                </p:column>
                                            </p:row>
                                        </f:facet>
                                    </p:panelGrid>
                                    <br/>
                                    <p:panelGrid style="width: 100%">
                                        <p:row>
                                            <p:column>
                                                <p:outputLabel value="Telefono Particular"/>
                                            </p:column>
                                            <p:column style="width: 26%">
                                                <p:inputText value="#{personasController.persona.telefonoParticular}"
                                                             readonly="#{usuarioController.readOnly}" disabled="#{usuarioController.readOnly}"/>
                                            </p:column>
                                            <p:column>
                                                <p:outputLabel value="Celular"/>
                                            </p:column>
                                            <p:column style="width: 26%">
                                                <p:inputText value="#{personasController.persona.celular}"
                                                             readonly="#{usuarioController.readOnly}" disabled="#{usuarioController.readOnly}"/>
                                            </p:column>
                                            <p:column>
                                                <p:outputLabel value="E-Mail"/>
                                            </p:column>
                                            <p:column style="width: 26%">
                                                <p:inputText value="#{personasController.persona.email}"
                                                             readonly="#{usuarioController.readOnly}" disabled="#{usuarioController.readOnly}"
                                                             validatorMessage="El valor ingresado no es un Email valido."
                                                             >
                                                    <f:validateRegex pattern="^$|^[_A-Za-z0-9-\+]+(\.[_A-Za-z0-9-]+)*@[A-Za-z0-9-]+(\.[A-Za-z0-9]+)*(\.[A-Za-z]{2,})$"/>
                                                </p:inputText>
                                            </p:column>
                                        </p:row>
                                    </p:panelGrid>
                                </p:column>
                            </p:row>
                        </p:panelGrid>
                    </p:tab>
                    <p:tab id="informacionFamiliarTab" title="Familiar">
                        <p:panelGrid style="width: 100%">
                            <f:facet name="header">
                                <p:row>
                                    <p:column style="text-align: center">
                                        <p:outputLabel value="Familiares"/>
                                    </p:column>
                                </p:row>
                            </f:facet>
                        </p:panelGrid>
                        <br/>
                        <p:panelGrid>
                            <p:row>
                                <p:column>
                                    <p:outputLabel value="Nombre completo"/>
                                </p:column>
                                <p:column colspan="5">
                                    <p:inputText value="#{personasController.familiar.nombre}"
                                                 readonly="#{usuarioController.readOnly}" disabled="#{usuarioController.readOnly}"/>
                                </p:column>
                            </p:row>
                            <p:row>
                                <p:column>
                                    <p:outputLabel value="Tipo de Identificación"/>
                                </p:column>
                                <p:column>
                                    <p:selectOneMenu  value="#{personasController.familiar.tipoIdentificacion.idTipoIdentificacion}" style="width: 95%" 
                                                      disabled="#{usuarioController.readOnly}">
                                        <f:selectItems var="tipoIdentificacion" value="#{personasController.tiposIdentificacionList}" 
                                                       itemLabel="#{tipoIdentificacion.descripcion}" itemValue="#{tipoIdentificacion.idTipoIdentificacion}"/>
                                    </p:selectOneMenu >
                                </p:column>
                                <p:column>
                                    <p:outputLabel value="Número de Identificación"/>
                                </p:column>
                                <p:column>
                                    <p:inputText value="#{personasController.familiar.numeroIdentificacion}"
                                                 readonly="#{usuarioController.readOnly}" disabled="#{usuarioController.readOnly}"/>
                                </p:column>
                                <p:column>
                                    <p:outputLabel value="Fecha de Nacimiento"/>
                                </p:column>
                                <p:column style="width: 20%">
                                    <p:inputText readonly="#{usuarioController.readOnly}" disabled="#{usuarioController.readOnly}"
                                                value="#{personasController.familiar.fechaNacimiento}">
                                        <f:validateRegex pattern="^$|\b\d{4}\b|\b\d{2}[/]\d{4}\b|\b\d{2}[/]\d{2}[/]\d{4}\b"/>
                                    </p:inputText>
                                </p:column>
                            </p:row>
                            <p:row>    
                                <p:column>
                                    <p:outputLabel value="Parentesco"/>
                                </p:column>
                                <p:column> 
                                    <p:selectOneMenu  value="#{personasController.familiar.parentesco}" style="width: 95%" 
                                                      disabled="#{usuarioController.readOnly}">
                                        <f:selectItem itemLabel="Esposo(a)" itemValue="Esposo(a)"/>
                                        <f:selectItem itemLabel="Concubino(a)" itemValue="Concubino(a)"/>
                                        <f:selectItem itemLabel="Hijo(a)" itemValue="Hijo(a)"/>
                                        <f:selectItem itemLabel="Hijastro(a)" itemValue="Hijastro(a)"/>
                                    </p:selectOneMenu >
                                </p:column>
                                <p:column>
                                    <p:outputLabel value="Ultimo año cursado o en curso"/>
                                </p:column>
                                <p:column>
                                    <p:selectOneMenu value="#{personasController.familiar.ultimoAnioCursado}" disabled="#{usuarioController.readOnly}">
                                        <f:selectItem itemLabel="" itemValue="" noSelectionOption="true"/>
                                        <f:selectItem itemLabel="Inicial" itemValue="Inicial"/>
                                        <f:selectItem itemLabel="Primario" itemValue="Primario"/>
                                        <f:selectItem itemLabel="Secundario" itemValue="Secundario"/>
                                        <f:selectItem itemLabel="Terciario" itemValue="Terciario"/>
                                        <f:selectItem itemLabel="Universitario" itemValue="Universitario"/>
                                        <f:selectItem itemLabel="Postgrado" itemValue="Postgrado"/>
                                    </p:selectOneMenu>
                                </p:column>
                            </p:row>
                            <p:row>
                                <p:column style="text-align: center" colspan="10">
                                    <br/>
                                    <p:commandButton value="Agregar" icon="ui-icon-plusthick" actionListener="#{personasController.onAddFamiliar()}" 
                                                     disabled="#{usuarioController.readOnly}" update=":personasForm:generalTabView"/>
                                </p:column>
                            </p:row>
                        </p:panelGrid>
                        <br/><br/>
                        <p:dataTable id="tableFamiliares" rows="5" paginator="true" paginatorPosition="bottom" style="width: 100%"
                                     rowIndexVar="index"  var="familiar" value="#{personasController.persona.familiaresList}"
                                     emptyMessage="No posee registros aún.">
                            <f:facet name="header">
                                <p:outputPanel>
                                    <p:outputLabel value="Listado de Familiares" />
                                </p:outputPanel>
                            </f:facet>
                            <p:column headerText="#" style="width: 3%">
                                <p:outputLabel value="#{index+1}" />
                            </p:column>
                            <p:column headerText="Nombre">
                                <p:outputLabel value="#{familiar.nombre}" />
                            </p:column>
                            <p:column headerText="Tipo de identificacion">
                                <p:outputLabel value="#{familiar.tipoIdentificacion.descripcion}" />
                            </p:column>
                            <p:column headerText="Numero de Identificacion" style="width: 20%">
                                <p:outputLabel value="#{familiar.numeroIdentificacion}" />
                            </p:column>
                            <p:column headerText="Parentesco" style="width: 15%">
                                <p:outputLabel value="#{familiar.parentesco}" />
                            </p:column>
                            <p:column style="width: 10%">
                                <p:commandButton icon="ui-icon-search" title="View" disabled="#{usuarioController.readOnly}"
                                                 actionListener="#{personasController.onViewFamiliarDetailedInfo(familiar)}" 
                                                 update=":personasForm:generalTabView"/>
                                <p:commandButton icon="ui-icon-trash" disabled="#{usuarioController.readOnly}"
                                                 actionListener="#{personasController.onRemoveFamiliar(familiar)}"
                                                 update=":personasForm:generalTabView"/>
                            </p:column>
                        </p:dataTable>
                    </p:tab>
                    <p:tab title="Edu. Formal">
                        <p:panelGrid style="width: 100%">
                            <f:facet name="header">
                                <p:row>
                                    <p:column style="text-align: center">
                                        <p:outputLabel value="Registro de estudios formales realizados"/>
                                    </p:column>
                                </p:row>
                            </f:facet>
                        </p:panelGrid>
                        <br/>
                        <p:panelGrid style="width: 100%">
                            <p:row>
                                <p:column style="width: 15%">
                                    <p:outputLabel value="Titulo obtenido"/>
                                </p:column>
                                <p:column colspan="3">
                                    <p:inputText value="#{personasController.educacionFormal.titulo}"
                                                 readonly="#{usuarioController.readOnly}" disabled="#{usuarioController.readOnly}"/>
                                </p:column>
                            </p:row>
                            <p:row>
                                <p:column>
                                    <p:outputLabel value="Institución"/>
                                </p:column>
                                <p:column colspan="3">
                                    <p:inputText value="#{personasController.educacionFormal.institucion}"
                                                 readonly="#{usuarioController.readOnly}" disabled="#{usuarioController.readOnly}"/>
                                </p:column>
                            </p:row>
                            <p:row>
                                <p:column>
                                    <p:outputLabel value="Nivel de Estudio"/>
                                </p:column>
                                <p:column>
                                    <p:selectOneMenu  value="#{personasController.educacionFormal.nivelEstudio}" style="width: 95%" disabled="#{usuarioController.readOnly}">
                                        <f:selectItem itemLabel="Primario" itemValue="Primario"/>
                                        <f:selectItem itemLabel="Secundario" itemValue="Secundario"/>
                                        <f:selectItem itemLabel="Terciario" itemValue="Terciario"/>
                                        <f:selectItem itemLabel="Universitario" itemValue="Universitario"/>
                                        <f:selectItem itemLabel="Postgrado" itemValue="Postgrado"/>
                                    </p:selectOneMenu >
                                </p:column>
                                <p:column style="width: 10%">
                                    <p:outputLabel value="Año de Egreso"/>
                                </p:column>
                                <p:column>
                                    <p:selectOneMenu value="#{personasController.educacionFormal.anioEgreso}" style="width: 95%" disabled="#{usuarioController.readOnly}">
                                        <f:selectItem noSelectionOption="true" itemLabel="" itemValue="#{null}" />
                                        <f:selectItems value="#{personasController.rangoAniosPermitidos}" var="anio" itemLabel="#{anio}" itemValue="#{anio}"/>
                                    </p:selectOneMenu>
                                </p:column>
                            </p:row>
                            <p:row>
                                <p:column style="text-align: center" colspan="10">
                                    <br/>
                                    <p:commandButton value="Agregar" icon="ui-icon-plusthick" actionListener="#{personasController.onAddEducacionFormal()}" 
                                                     disabled="#{usuarioController.readOnly}" update=":personasForm:generalTabView"/>
                                </p:column>
                            </p:row>
                        </p:panelGrid>
                        <br/><br/>
                        <p:dataTable id="tableEducacionesFormales" rows="5" paginator="true" paginatorPosition="bottom" style="width: 100%"
                                     rowIndexVar="index" var="educacionFormal" value="#{personasController.persona.educacionesFormalesList}"
                                     emptyMessage="No posee registros aún.">
                            <f:facet name="header">
                                <p:outputPanel>
                                    <p:outputLabel value="Listado de Educaciones Formales" />
                                </p:outputPanel>
                            </f:facet>
                            <p:column headerText="#" style="width: 3%">
                                <p:outputLabel value="#{index+1}" />
                            </p:column>
                            <p:column headerText="Titulo Obtenido">
                                <p:outputLabel value="#{educacionFormal.titulo}" />
                            </p:column>
                            <p:column headerText="Institución">
                                <p:outputLabel value="#{educacionFormal.institucion}" />
                            </p:column>
                            <p:column headerText="Nivel de Estudio" style="width: 20%">
                                <p:outputLabel value="#{educacionFormal.nivelEstudio}" />
                            </p:column>
                            <p:column headerText="Año de Egreso" style="width: 10%">
                                <p:outputLabel value="#{educacionFormal.anioEgreso == 0 ? '' : educacionFormal.anioEgreso}" />
                            </p:column>
                            <p:column style="width: 10%">
                                <p:commandButton icon="ui-icon-search" title="View" actionListener="#{personasController.onViewEducacionFormalDetail(educacionFormal)}" 
                                                 update=":personasForm:generalTabView" disabled="#{usuarioController.readOnly}"/>
                                <p:commandButton icon="ui-icon-trash" disabled="#{usuarioController.readOnly}"
                                                 actionListener="#{personasController.onRemoveEducacionFormal(educacionFormal)}"
                                                 update="personasForm:generalTabView"/>
                            </p:column>
                        </p:dataTable>
                    </p:tab>
                    <p:tab title="Edu. No Formal">
                        <p:panelGrid style="width: 100%">
                            <f:facet name="header">
                                <p:row>
                                    <p:column style="text-align: center">
                                        <p:outputLabel value="Registro de estudios no formales realizados"/>
                                    </p:column>
                                </p:row>
                            </f:facet>
                        </p:panelGrid>
                        <br/>
                        <p:panelGrid style="width: 100%">
                            <p:row>
                                <p:column style="width: 13%">
                                    <p:outputLabel value="Tipo de Educacion"/>
                                </p:column>
                                <p:column> 
                                    <p:selectOneMenu  value="#{personasController.educacionNoFormal.tipoEducacionNoFormal}" style="width: 95%" disabled="#{usuarioController.readOnly}" >
                                        <f:selectItem itemLabel="Curso" itemValue="Curso"/>
                                        <f:selectItem itemLabel="Taller" itemValue="Taller"/>
                                        <f:selectItem itemLabel="Seminario" itemValue="Seminario"/>
                                        <f:selectItem itemLabel="Capacitacion" itemValue="Capacitacion"/>
                                        <f:selectItem itemLabel="Otro" itemValue="Otro"/>
                                    </p:selectOneMenu >
                                </p:column>
                                <p:column style="width: 5%">
                                    <p:outputLabel value="Tematica"/>
                                </p:column>
                                <p:column>
                                    <p:inputText value="#{personasController.educacionNoFormal.tema}"
                                                 readonly="#{usuarioController.readOnly}" disabled="#{usuarioController.readOnly}"/>
                                </p:column>
                                <p:column style="width: 5%">
                                    <p:outputLabel value="Fecha"/>
                                </p:column>
                                <p:column>
                                    <p:inputText value="#{personasController.educacionNoFormal.fecha}" readonly="#{usuarioController.readOnly}" disabled="#{usuarioController.readOnly}"
                                                 validatorMessage="Formato de fecha invalido.">
                                        <f:validateRegex pattern="^$|\b\d{4}\b|\b\d{2}[/]\d{4}\b|\b\d{2}[/]\d{2}[/]\d{4}\b"/>
                                    </p:inputText>
                                    <!--<p:calendar value="#{personasController.educacionNoFormal.fecha}" readonly="#{usuarioController.readOnly}" disabled="#{usuarioController.readOnly}"/>-->
                                </p:column>
                            </p:row>
                            <p:row>
                                <p:column>
                                    <p:outputLabel value="Institución"/>
                                </p:column>
                                <p:column colspan="5">
                                    <p:inputText value="#{personasController.educacionNoFormal.institucion}"
                                                 readonly="#{usuarioController.readOnly}" disabled="#{usuarioController.readOnly}"/>
                                </p:column>
                            </p:row>
                            <p:row>
                                <p:column style="text-align: center" colspan="10">
                                    <br/>
                                    <p:commandButton value="Agregar" icon="ui-icon-plusthick" actionListener="#{personasController.onAddEducacionNoFormal()}" 
                                                     disabled="#{usuarioController.readOnly}" update=":personasForm:generalTabView"/>
                                </p:column>
                            </p:row>
                        </p:panelGrid>
                        <br/><br/>
                        <p:dataTable id="tableEducacionesNoFormales" rows="5" paginator="true" paginatorPosition="bottom" style="width: 100%"
                                     rowIndexVar="index" var="educacionNoFormal" value="#{personasController.persona.educacionesNoFormalesList}"
                                     emptyMessage="No posee registros aún.">
                            <f:facet name="header">
                                <p:outputPanel>
                                    <p:outputLabel value="Listado de Educaciones No Formales" />
                                </p:outputPanel>
                            </f:facet>
                            <p:column headerText="#" style="width: 3%">
                                <p:outputLabel value="#{index+1}" />
                            </p:column>
                            <p:column headerText="Tipo">
                                <p:outputLabel value="#{educacionNoFormal.tipoEducacionNoFormal}" />
                            </p:column>
                            <p:column headerText="Tematica">
                                <p:outputLabel value="#{educacionNoFormal.tema}" />
                            </p:column>
                            <p:column headerText="Institución">
                                <p:outputLabel value="#{educacionNoFormal.institucion}" />
                            </p:column>
                            <p:column headerText="Fecha del Estudio" style="width: 20%">
                                <p:outputLabel value="#{educacionNoFormal.fecha}" >
                                    <!--<f:convertDateTime pattern="dd/MM/yyyy" />-->
                                </p:outputLabel>
                            </p:column>
                            <p:column style="width: 10%">
                                <p:commandButton icon="ui-icon-search" title="View" disabled="#{usuarioController.readOnly}"
                                                 actionListener="#{personasController.onViewEducacionNoFormalDetail(educacionNoFormal)}" 
                                                 update=":personasForm:generalTabView"/>
                                <p:commandButton icon="ui-icon-trash" disabled="#{usuarioController.readOnly}"
                                                 actionListener="#{personasController.onRemoveEducacionNoFormal(educacionNoFormal)}"
                                                 update="personasForm:generalTabView"/>
                            </p:column>
                        </p:dataTable>
                    </p:tab>
                    <p:tab id="tabInformacionLaboral" title="Laboral">
                        <p:panelGrid style="width: 100%">
                            <f:facet name="header">
                                <p:row>
                                    <p:column style="text-align: center">
                                        <p:outputLabel value="Registro de información laboral"/>
                                    </p:column>
                                </p:row>
                            </f:facet>
                        </p:panelGrid>
                        <br/>
                        <p:panelGrid style="width: 100%">
                            <p:row>
                                <p:column>
                                    <p:outputLabel value="CUIL"/>
                                </p:column>
                                <p:column>
                                    <p:inputMask mask="99-99999999-9" value="#{personasController.persona.cuil}" readonly="#{usuarioController.readOnly}" disabled="#{usuarioController.readOnly}"/>
                                </p:column>
                                <p:column>
                                    <p:outputLabel value="Puesto desempeñado: "  />
                                </p:column>
                                <p:column>
                                    <p:selectOneMenu value="#{personasController.persona.puesto.idPuesto}" style="width: 95%" disabled="#{usuarioController.readOnly}"
                                                     effect="fade" filter="true" filterMatchMode="startsWith">
                                        <f:selectItems value="#{personasController.puestosList}" 
                                                       var="puesto" itemLabel="#{puesto.descripcion}" itemValue="#{puesto.idPuesto}" />
                                    </p:selectOneMenu>
                                </p:column>
                            </p:row>
                            <p:row>
                                <p:column style="width: 20%">
                                    <p:outputLabel value="Sector"/>
                                </p:column>
                                <p:column style="width: 30%">
                                    <p:selectOneMenu value="#{personasController.persona.sector.idSector}" disabled="#{usuarioController.readOnly}" style="width: 95%">
                                        <p:ajax listener="#{personasController.onSectorChange()}" update="panelGroupCuestionario" process="@this"/>
                                        <f:selectItems value="#{personasController.sectoresList}" var="sector" itemLabel="#{sector.nombre}" itemValue="#{sector.idSector}"/>
                                    </p:selectOneMenu>
                                </p:column>
                                <p:column style="width: 20%">
                                    <p:outputLabel value="Categoría laboral"/>
                                </p:column>
                                <p:column style="width: 30%">
                                    <p:selectOneMenu value="#{personasController.persona.idCategoriaLaboral.idCategoriaLaboral}" styleClass="categoria-laboral-select"
                                                     effect="fade" filter="true" filterMatchMode="contains" disabled="#{usuarioController.readOnly}">
                                        <f:selectItems value="#{personasController.categoriasLaboralesList}" 
                                                       var="categoria" itemLabel="#{categoria.esc}-#{categoria.cat} -#{categoria.descripcion} (#{categoria.idGremio.descripcion})" itemValue="#{categoria.idCategoriaLaboral}" />
                                    </p:selectOneMenu>
                                </p:column>
                            </p:row>
                            <p:row>
                                <p:column style="width: 20%">
                                    <p:outputLabel value="Linea"/>
                                </p:column>
                                <p:column style="width: 30%">
                                    <p:selectOneMenu value="#{personasController.persona.linea}" disabled="#{usuarioController.readOnly}" style="width: 95%">
                                        <f:selectItem itemLabel="Roca" itemValue="Roca"/>
                                        <f:selectItem itemLabel="San Martin" itemValue="San Martin"/>
                                        <f:selectItem itemLabel="Sarmiento" itemValue="Sarmiento"/>
                                    </p:selectOneMenu>
                                </p:column>
                                <p:column style="width: 20%">
                                    <p:outputLabel value="Encuadre"/>
                                </p:column>
                                <p:column style="width: 30%">
                                    <p:selectOneMenu value="#{personasController.persona.gremio.idGremio}" disabled="#{usuarioController.readOnly}" style="width: 95%">
                                        <f:selectItems value="#{personasController.gremiosList}" var="gremio" itemLabel="#{gremio.sigla}" itemValue="#{gremio.idGremio}"/>
                                    </p:selectOneMenu>
                                </p:column>
                            </p:row>
                            <p:row>
                                <p:column style="width: 20%">
                                    <p:outputLabel value="Fecha de Ingreso"/>
                                </p:column>
                                <p:column style="width: 30%">
                                    <p:inputText readonly="#{usuarioController.readOnly}" disabled="#{usuarioController.readOnly}"
                                                value="#{personasController.persona.fechaIngreso}">
                                        <f:validateRegex pattern="^$|\b\d{4}\b|\b\d{2}[/]\d{4}\b|\b\d{2}[/]\d{2}[/]\d{4}\b"/>
                                    </p:inputText>
                                </p:column>
                                <p:column style="width: 20%">
                                    <p:outputLabel value="Antiguedad"/>
                                </p:column>
                                <p:column style="width: 30%">
                                    <p:inputText value="#{personasController.persona.antiguedad}" disabled="#{usuarioController.readOnly}"/>
                                </p:column>
                            </p:row>
                            <p:row>
                                <p:column>
                                    <p:outputLabel value="Horario de trabajo"/>
                                </p:column>
                                <p:column>
                                    <p:inputText value="#{personasController.persona.horario}" readonly="#{usuarioController.readOnly}" disabled="#{usuarioController.readOnly}"/>
                                </p:column>
                                <p:column>
                                    <p:outputLabel value="Jefe inmediato / Supervisor"/>
                                </p:column>
                                <p:column>
                                    <p:inputText value="#{personasController.persona.jefeInmediato}" readonly="#{usuarioController.readOnly}" disabled="#{usuarioController.readOnly}"/>
                                </p:column>
                            </p:row>
                            <p:row>
                                <p:column>
                                    <p:outputLabel value="Obra social"/>
                                </p:column>
                                <p:column>
                                    <p:inputText value="#{personasController.persona.obraSocial}" readonly="#{usuarioController.readOnly}" disabled="#{usuarioController.readOnly}"/>
                                </p:column>
                                <p:column>
                                    <p:outputLabel value="Entidad bancaria donde cobra"/>
                                </p:column>
                                <p:column>
                                    <p:inputText value="#{personasController.persona.banco}" readonly="#{usuarioController.readOnly}" disabled="#{usuarioController.readOnly}"/>
                                </p:column>
                            </p:row>
                            <p:row>
                                <p:column>
                                    <p:outputLabel value="Posee credencial de la ART?"/>
                                </p:column>
                                <p:column>
                                    <p:selectOneRadio value="#{personasController.persona.tieneCredencialArt}" disabled="#{usuarioController.readOnly}">
                                        <f:selectItem itemLabel="Si" itemValue="S"/>
                                        <f:selectItem itemLabel="No" itemValue="N"/>
                                    </p:selectOneRadio>
                                </p:column>
                            </p:row>
                        </p:panelGrid>

                        <br/><hr/><br/>

                        <p:panelGrid id="input-informacion-laboral" style="width: 100%">
                            <p:row>
                                <p:column>
                                    <p:outputLabel value="Empresa"/>
                                </p:column>
                                <p:column>
                                    <p:inputText value="#{personasController.informacionLaboral.empresa}" readonly="#{usuarioController.readOnly}" disabled="#{usuarioController.readOnly}"/>
                                </p:column>
                                <p:column>
                                    <p:outputLabel value="Domicilio"/>
                                </p:column>
                                <p:column colspan="3">
                                    <p:inputText value="#{personasController.informacionLaboral.domicilio}" readonly="#{usuarioController.readOnly}" disabled="#{usuarioController.readOnly}"/>
                                </p:column>
                            </p:row>
                            <p:row>
                                <p:column style="width: 12%">
                                    <p:outputLabel value="Puesto/Cargo"/>
                                </p:column>
                                <p:column>
                                    <p:inputText value="#{personasController.informacionLaboral.cargo}" readonly="#{usuarioController.readOnly}" disabled="#{usuarioController.readOnly}"/>
                                </p:column>
                                <p:column style="width: 5%">
                                    <p:outputLabel value="Desde"/>
                                </p:column>
                                <p:column style="width: 15%">
                                    <p:inputText value="#{personasController.informacionLaboral.desde}" readonly="#{usuarioController.readOnly}" disabled="#{usuarioController.readOnly}"
                                                 validatorMessage="Formato de fecha invalido.">
                                        <f:validateRegex pattern="^$|\b\d{4}\b|\b\d{2}[/]\d{4}\b|\b\d{2}[/]\d{2}[/]\d{4}\b"/>
                                    </p:inputText>
                                </p:column>
                                <p:column style="width: 5%">
                                    <p:outputLabel value="Hasta"/>
                                </p:column>
                                <p:column style="width: 15%">
                                    <p:inputText value="#{personasController.informacionLaboral.hasta}" readonly="#{usuarioController.readOnly}" disabled="#{usuarioController.readOnly}"
                                                 validatorMessage="Formato de fecha invalido.">
                                        <f:validateRegex pattern="^$|\b\d{4}\b|\b\d{2}[/]\d{4}\b|\b\d{2}[/]\d{2}[/]\d{4}\b"/>
                                    </p:inputText>
                                </p:column>
                            </p:row>
                            <p:row>
                                <p:column>
                                    <p:outputLabel value="Motivo del egreso"/>
                                </p:column>
                                <p:column>
                                    <p:inputText value="#{personasController.informacionLaboral.motivoEgreso}" readonly="#{usuarioController.readOnly}" disabled="#{usuarioController.readOnly}"/>
                                </p:column>
                            </p:row>
                            <p:row>
                                <p:column style="text-align: center" colspan="10">
                                    <br/>
                                    <p:commandButton value="Agregar" icon="ui-icon-plusthick" actionListener="#{personasController.onAddInformacionLaboral()}" 
                                                     disabled="#{usuarioController.readOnly}" update=":personasForm:generalTabView"/>
                                </p:column>
                            </p:row>
                        </p:panelGrid>
                        <br/><br/>
                        <p:dataTable id="tableInformacionLaboral" rows="5" paginator="true" paginatorPosition="bottom" style="width: 100%"
                                     rowIndexVar="index" var="informacionLaboral" value="#{personasController.persona.informacionLaboralList}"
                                     emptyMessage="No posee registros aún.">
                            <f:facet name="header">
                                <p:outputPanel>
                                    <p:outputLabel value="Empleos Anteriores (últimos tres)" />
                                </p:outputPanel>
                            </f:facet>
                            <p:column headerText="#" style="width: 3%">
                                <p:outputLabel value="#{index+1}" />
                            </p:column>
                            <p:column headerText="Empresa">
                                <p:outputLabel value="#{informacionLaboral.empresa}" />
                            </p:column>
                            <p:column headerText="Puesto/Cargo">
                                <p:outputLabel value="#{informacionLaboral.cargo}" />
                            </p:column>
                            <p:column headerText="Desde">
                                <p:outputLabel value="#{informacionLaboral.desde}" >
                                    <!--<f:convertDateTime pattern="dd/MM/yyyy" />-->
                                </p:outputLabel>
                            </p:column>
                            <p:column headerText="Hasta">
                                <p:outputLabel value="#{informacionLaboral.hasta}" >
                                    <!--<f:convertDateTime pattern="dd/MM/yyyy" />-->
                                </p:outputLabel>
                            </p:column>
                            <p:column style="width: 8%">
                                <p:commandButton icon="ui-icon-search" disabled="#{usuarioController.readOnly}"
                                                 actionListener="#{personasController.onViewInformacionLaboralDetail(informacionLaboral)}"
                                                 ajax="true" update="personasForm:generalTabView:input-informacion-laboral"/>
                                <p:commandButton icon="ui-icon-trash" disabled="#{usuarioController.readOnly}"
                                                 actionListener="#{personasController.onRemoveInformacionLaboral(informacionLaboral)}"
                                                 update="personasForm:generalTabView"/>
                            </p:column>
                        </p:dataTable>
                    </p:tab>
                    <p:tab title="Talles">
                        <p:dataTable id="tableInformacionIndumentaria" rows="1" paginator="false" 
                                     var="persona" value="#{personasController.persona}" style="width: 100%">
                            <f:facet name="header">
                                <p:outputPanel>
                                    <p:outputLabel value="Talles por Prenda" />
                                </p:outputPanel>
                            </f:facet>
                            <p:column headerText="Camisa (nro)">
                                <p:inputText value="#{persona.camisa}" readonly="#{usuarioController.readOnly}" disabled="#{usuarioController.readOnly}"
                                             validatorMessage="Formato invalido">
                                    <!--<f:validateRegex pattern="^$|[a-zA-Z]{1,2}|[0-9]{1,2}" />-->
                                </p:inputText>
                            </p:column>
                            <p:column headerText="Buzo (talle)">
                                <p:inputText value="#{persona.buzo}" readonly="#{usuarioController.readOnly}" disabled="#{usuarioController.readOnly}"
                                             validatorMessage="Formato invalido">
                                    <!--<f:validateRegex pattern="^$|[a-zA-Z]{1,2}|[0-9]{1,2}" />-->
                                </p:inputText>
                            </p:column>
                            <p:column headerText="Pantalon (nro)">
                                <p:inputText value="#{persona.pantalon}" readonly="#{usuarioController.readOnly}" disabled="#{usuarioController.readOnly}"
                                             validatorMessage="Formato invalido">
                                    <!--<f:validateRegex pattern="^$|[a-zA-Z]{1,2}|[0-9]{1,2}" />-->
                                </p:inputText>
                            </p:column>
                            <p:column headerText="Botines (nro)">
                                <p:inputText value="#{persona.botines}" readonly="#{usuarioController.readOnly}" disabled="#{usuarioController.readOnly}"
                                             validatorMessage="Formato invalido">
                                    <!--<f:validateRegex pattern="^$|[a-zA-Z]{1,2}|[0-9]{1,2}" />-->
                                </p:inputText>
                            </p:column>
                            <p:column headerText="Campera (talle)">
                                <p:inputText value="#{persona.campera}" readonly="#{usuarioController.readOnly}" disabled="#{usuarioController.readOnly}"
                                             validatorMessage="Formato invalido">
                                    <!--<f:validateRegex pattern="^$|[a-zA-Z]{1,2}|[0-9]{1,2}" />-->
                                </p:inputText>
                            </p:column>
                            <p:column headerText="Equipo de Lluvia (nro)">
                                <p:inputText value="#{persona.eqLluvia}" readonly="#{usuarioController.readOnly}" disabled="#{usuarioController.readOnly}"
                                             validatorMessage="Formato invalido">
                                    <!--<f:validateRegex pattern="^$|[a-zA-Z]{1,2}|[0-9]{1,2}" />-->
                                </p:inputText>
                            </p:column>
                        </p:dataTable>
                        <br/><br/>
                        <p:panelGrid>
                            <p:row>
                                <p:column colspan="2">
                                    <p:outputLabel value="Presenta carnet de conductor de locomotora o zorra ?"/>
                                </p:column>
                                <p:column colspan="2">
                                    <p:selectOneRadio value="#{personasController.persona.tieneCarnetConductor}" disabled="#{usuarioController.readOnly}">
                                        <f:selectItem itemLabel="Si" itemValue="S"/>
                                        <f:selectItem itemLabel="No" itemValue="N"/>
                                        <f:selectItem itemLabel="N/A" itemValue="X"/>
                                    </p:selectOneRadio>
                                </p:column>
                            </p:row>
                            <p:row>
                                <p:column colspan="4">
                                    <p:outputLabel value="En caso de presentar carnet indicar vigencia."/>
                                </p:column>
                            </p:row>
                            <p:row>
                                <p:column>
                                    <p:outputLabel value="Desde: "/>
                                </p:column>
                                <p:column>
                                    <p:calendar navigator="true" pattern="dd/MM/yyyy" readonly="#{usuarioController.readOnly}" disabled="#{usuarioController.readOnly}"
                                                value="#{personasController.persona.carnetConductorDesde}"/>
                                </p:column>
                                <p:column>
                                    <p:outputLabel value="Hasta: "/>
                                </p:column>
                                <p:column>
                                    <p:calendar navigator="true" pattern="dd/MM/yyyy" readonly="#{usuarioController.readOnly}" disabled="#{usuarioController.readOnly}"
                                                value="#{personasController.persona.carnetConductorHasta}"/>
                                </p:column>
                            </p:row>
                        </p:panelGrid>
                    </p:tab> 
                    <!--
                    <p:tab title="Documentos">
                        <p:panelGrid style="width: 100%">
                            <f:facet name="header">
                                <p:row>
                                    <p:column style="text-align: center">
                                        <p:outputLabel value="Documentos entregados por el Empleado"/>
                                    </p:column>
                                </p:row>
                            </f:facet>
                        </p:panelGrid>
                        <br/>
                        <center>
                            <p:dataTable var="tipoDocumento" value="#{personasController.tiposDocumentosList}" style="width: 40%">
                                <p:subTable var="documento" value="#{tipoDocumento.documentosList}">
                                    <f:facet name="header">
                                        <h:outputText value="#{tipoDocumento.descripcion}" />
                                    </f:facet>
                                    <p:column style="width: 1%">
                                        <p:selectBooleanCheckbox value="#{documento.selected}" />
                                    </p:column>
                                    <p:column>
                                        <h:outputText value="#{documento.descripcion}" />
                                    </p:column>
                                </p:subTable>
                            </p:dataTable>
                        </center>
                        <br/>    
                    </p:tab>
                    -->
                    <p:tab title="Desarrollo Profesional">
                        <p:panelGrid style="width: 100%">
                            <f:facet name="header">
                                <p:row>
                                    <p:column style="text-align: center">
                                        <p:outputLabel value="Cuestionario"/>
                                    </p:column>
                                </p:row>
                            </f:facet>
                        </p:panelGrid>

                        <custom:cuestionario cuestionario="#{personasController.cuestionarioDesarrolloProfesional}" single="true" disabled="#{usuarioController.readOnly}"/>
                    </p:tab>
                    <p:tab title="Salud Ocupacional">
                        <p:panelGrid style="width: 100%">
                            <f:facet name="header">
                                <p:row>
                                    <p:column style="text-align: center">
                                        <p:outputLabel value="Cuestionario"/>
                                    </p:column>
                                </p:row>
                            </f:facet>
                        </p:panelGrid>

                        <custom:cuestionario cuestionario="#{personasController.cuestionarioSaludOcupacional}" single="true" disabled="#{usuarioController.readOnly}"/>
                    </p:tab>
                    <p:tab title="Cuestionario" disabled="#{usuarioController.cantViewCuestionario}">
                        <p:panelGrid style="width: 100%">
                            <f:facet name="header">
                                <p:row>
                                    <p:column style="text-align: center">
                                        <p:outputLabel value="Encuesta particular por sector laboral"/>
                                    </p:column>
                                </p:row>
                            </f:facet>
                        </p:panelGrid>

                        <h:panelGroup id="panelGroupCuestionario">
                            <custom:cuestionario cuestionario="#{personasController.persona.sector.cuestionariosSectorList}" single="false" disabled="#{usuarioController.readOnly}"/>
                        </h:panelGroup>
                    </p:tab>
                </p:tabView>

                <p:panelGrid style="width: 100%">
                    <p:row>
                        <p:column colspan="2">
                            <br/><hr/>
                        </p:column>
                    </p:row>
                    <p:row>
                        <p:column style="text-align: right">
                            <p:commandButton value="Cancelar" icon="ui-icon-close" style="background-color: tomato" update=":personasForm" immediate="true">
                                <p:confirm disabled="#{usuarioController.readOnly}" header="Perdida de datos" message="Si cancelas el proceso antes de guardar puedes perder los datos ingresados. ¿Realmente desea salir?" icon="ui-icon-alert" />
                                <f:setPropertyActionListener  target="#{personasController.showPersonasTable}" value="#{!personasController.showPersonasTable}"/>
                            </p:commandButton> 
                        </p:column>
                        <p:column>
                            <p:commandButton value="Aceptar" icon="ui-icon-check" style="background-color: seagreen" actionListener="#{personasController.onSave()}" 
                                             disabled="#{usuarioController.readOnly}" update=":personasForm"/>
                        </p:column>
                    </p:row>
                </p:panelGrid>
            </h:panelGroup>

            <h:panelGroup rendered="#{personasController.showPersonasTable}" style="width: 100%; text-align: center">
                <p:row>
                    <p:column style="width: 75%;">
                        <h:outputText value="Listado de personas registradas en el sistema" style="font-size: 15px"/>
                    </p:column>
                </p:row>

                <br/><br/>

                <p:dataTable id="personasTable" rows="10" paginator="true" paginatorPosition="bottom" style="width: 100%"
                             var="persona" rowIndexVar="index" widgetVar="widget" value="#{personasController.personasList}" >
                    <f:facet name="header">
                        <p:outputPanel>
                            <table style="border: none; border-width: 0px">
                                <tr>
                                    <td style="border: none; border-width: 0px; text-align: left">
                                        <p:commandButton icon="ui-icon-plus" actionListener="#{personasController.onCreatePersona()}" update=":personasForm"
                                                         disabled="#{usuarioController.readOnly}"/>
                                    </td>
                                    <td style="border: none; border-width: 0px; font-size: 15px">
                                        <p:outputLabel value="Personas" />
                                    </td>
                                    <td style="border: none; border-width: 0px; text-align: right">
                                        <p:commandLink actionListener="#{personasController.onExportarPersonasAllExcel()}" 
                                                       rendered="#{usuarioController.canExportExcel}"
                                                       ajax="false"
                                                       title="Exporta en formato Excel un listado de las Personas Ingresadas en el Sistema">
                                            <h:graphicImage name="images/excel.png" style="height: 28px;width: 28px"/>
                                        </p:commandLink>
                                    </td>
                                </tr>
                            </table>
                        </p:outputPanel>
                    </f:facet>
                    <p:column headerText="#" style="width: 3%">
                        <p:outputLabel value="#{index+1}" />
                    </p:column>
                    <p:column headerText="Legajo" filterBy="#{persona[0]}" filterMatchMode="contains">
                        <p:outputLabel value="#{persona[0]}" />
                    </p:column>
                    <p:column headerText="Nombres" filterBy="#{persona[1]}" filterMatchMode="contains">
                        <p:outputLabel value="#{persona[1]}" />
                    </p:column>
                    <p:column headerText="Apellidos" filterBy="#{persona[2]}" filterMatchMode="contains">
                        <p:outputLabel value="#{persona[2]}" />
                    </p:column>
                    <p:column headerText="Email" filterBy="#{persona[3]}" filterMatchMode="contains">
                        <p:outputLabel value="#{persona[3]}" />
                    </p:column>
                    <p:column style="width:6%;text-align: center">
                        <p:commandButton icon="ui-icon-search" title="Detalle" actionListener="#{personasController.onViewPersonaDetailedInfo(persona[4])}" update=":personasForm"/>
                        <p:commandButton icon="ui-icon-trash" title="Eliminar" actionListener="#{personasController.onDeletePersona(persona[4])}" 
                                         update=":personasForm" rendered="#{usuarioController.canDelete}">
                            <p:confirm header="Confirmación" message="¿Realmente desea eliminar el registro?" icon="ui-icon-alert" />
                        </p:commandButton>
                    </p:column>
                </p:dataTable>

                <p:confirmDialog global="true" >
                    <center>
                        <p:commandButton value="Cancelar" type="button" styleClass="ui-confirmdialog-no" icon="ui-icon-close" />
                        <p:commandButton value="Aceptar" type="button" styleClass="ui-confirmdialog-yes" icon="ui-icon-check" />
                    </center>
                </p:confirmDialog>
            </h:panelGroup>
        </h:form>
    </ui:define>
</ui:composition> 
